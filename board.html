<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üí´ Fortune Board</title>
<style>
  html, body {
    height: 100%;
    overflow: hidden; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô */
    }
  body {
    background: radial-gradient(circle at top, #1b1d3f, #0f1227);
    color: #fff;
    font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto;
    margin: 0;
    padding: 20px;
    text-align: center;
    background-attachment: fixed; /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ç‡∏¢‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ scroll */
  }
  h1 {
    font-weight: 800;
    margin-bottom: 20px;
  }

  /* ‡∏ó‡∏≥‡πÉ‡∏´‡πâ #board ‡πÄ‡∏õ‡πá‡∏ô "‡∏ú‡∏∑‡∏ô‡∏ú‡πâ‡∏≤‡πÉ‡∏ö" */
  #board {
    position: relative;
    width: 100%;
    height: calc(100vh - 160px);
    overflow: hidden;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.02);
    box-shadow: inset 0 0 15px rgba(0,0,0,0.3);
  }

  .polaroid {
    position: absolute; /* ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î! */
    background: #fff;
    color: #000;
    padding: 10px;
    width: 180px; /* ‡πÉ‡∏ä‡πâ width ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ê‡∏≤‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì scale */
    border-radius: 12px;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
    transition: box-shadow 0.25s ease, z-index 0.25s ease, transform 0.1s linear; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° transition ‡πÉ‡∏´‡πâ transform */
    cursor: move; /* ‡πÄ‡∏û‡∏¥‡πà‡∏° cursor */
    user-select: none; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å text ‡πÄ‡∏ß‡∏•‡∏≤‡∏•‡∏≤‡∏Å */
  }
  .polaroid:hover {
    /* transform: none; */ /* ‡πÄ‡∏≠‡∏≤‡∏≠‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ scale ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô */
    box-shadow: 0 8px 25px rgba(255, 255, 255, 0.2);
    z-index: 10; /* ‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏•‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡∏ô‡∏≤‡∏ö */
  }
  /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏•‡∏≤‡∏™ .dragging */
  .polaroid.dragging {
    z-index: 99;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.7);
    transition: none; /* ‡∏õ‡∏¥‡∏î transition ‡∏ï‡∏≠‡∏ô‡∏•‡∏≤‡∏Å‡∏™‡∏î‡πÜ */
  }

  .polaroid img {
    width: 100%;
    border-radius: 10px;
    display: block;
    pointer-events: none; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏Ç‡∏ß‡∏≤‡∏á‡∏Å‡∏≤‡∏£ drag */
  }
  .caption {
    margin-top: 8px;
    font-size: 0.9rem;
    text-align: center;
    pointer-events: none; /* ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ text ‡∏Ç‡∏ß‡∏≤‡∏á‡∏Å‡∏≤‡∏£ drag */
  }
  /* ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö */
  .delete-btn {
    position: absolute;
    top: -30px;
    right: 1px;
    background: rgba(255, 60, 60, 0.85);
    color: #fff;
    border: none;
    border-radius: 10px;
    width: 22px;
    height: 22px;
    font-weight: 700;
    font-size: 14px;
    cursor: pointer;
    display: none;
    align-items: center;
    justify-content: center;
    transition: background 0.3s ease;
  }
  .polaroid:hover .delete-btn {
    display: flex;
  }
  .delete-btn:hover {
    background: rgba(255, 0, 0, 0.95);
  }

  /* ‡∏•‡∏ö .resize-handle */

  button {
    margin-top: 25px;
    padding: 10px 18px;
    border: none;
    border-radius: 10px;
    background: #7c8cff;
    color: #0b0f24;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s ease;
  }
  button:hover {
    transform: scale(1.05);
  }

  /* ===== Popup ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡πÉ‡∏´‡∏ç‡πà ===== */
#previewPopup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.7);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 999;
}

#previewPopup .popup-content {
  background: #1c1e3b;
  color: #fff;
  padding: 20px;
  border-radius: 20px;
  max-width: 90%;
  width: 400px;
  text-align: center;
  box-shadow: 0 0 25px rgba(168,139,255,0.6);
  animation: popupShow 0.25s ease-out;
}

#previewPopup img {
  width: 100%;
  border-radius: 16px;
  margin-bottom: 12px;
}

#previewPopup h3 {
  margin: 10px 0;
  font-size: 1.1rem;
  color: #bcaeff;
}

#previewPopup p {
  font-size: 0.95rem;
  line-height: 1.4;
  color: #dcdcf7;
}

#closePopup {
  margin-top: 14px;
  background: #444;
  color: #fff;
  border: none;
  border-radius: 10px;
  padding: 8px 16px;
  cursor: pointer;
  transition: background 0.3s ease;
}
#closePopup:hover { background: #666; }

@keyframes popupShow {
  from { transform: scale(0.8); opacity: 0; }
  to { transform: scale(1); opacity: 1; }
}

</style>
</head>
<body>
<h1>üí´ Fortune Board</h1>
<div id="board"></div>
<button onclick="window.location='index.html'">‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡∏π‡∏î‡∏ß‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏° üîÆ</button>
<div id="previewPopup">
  <div class="popup-content">
    <img id="previewImg" src="" alt="Preview">
    <h3 id="previewCaption"></h3>
    <p id="previewFortune"></p>
    <button id="closePopup">‡∏õ‡∏¥‡∏î</button>
  </div>
</div>
<script>
const board = document.getElementById("board");
const popup = document.getElementById("previewPopup");
const closePopupBtn = document.getElementById("closePopup");

function loadBoard() {
  // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ isInteracting ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ setInterval ‡πÅ‡∏•‡πâ‡∏ß
  // const isInteracting = document.querySelector('.polaroid.dragging, .polaroid.resizing');
  // if (isInteracting) { return; }

  const allData = JSON.parse(localStorage.getItem("polaroids") || "[]");
  const data = allData.slice().reverse(); // .reverse() ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏°‡πà‡∏™‡∏∏‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô
  board.innerHTML = "";
  if (data.length === 0) {
    board.innerHTML = "<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏î‡∏π‡∏î‡∏ß‡∏á‡πÄ‡∏•‡∏¢ ü•∫</p>";
    return;
  }

  const boardRect = board.getBoundingClientRect();

  data.forEach((c, i) => {
    const card = document.createElement("div");
    card.className = "polaroid";
    const originalIndex = (allData.length - 1) - i; // ‡∏´‡∏≤ index ‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö‡∏Å‡πà‡∏≠‡∏ô
    card.dataset.index = originalIndex;

    // ‡πÄ‡∏ä‡πá‡∏Ñ‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ñ‡πà‡∏≤‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å
    let needsUpdate = false; // Flag ‡πÑ‡∏ß‡πâ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ã‡∏ü‡∏Ñ‡πà‡∏≤‡∏™‡∏∏‡πà‡∏°‡πÑ‡∏´‡∏°
    let propertiesToUpdate = {};

    let rotation = c.rotation;
    if (rotation === undefined || rotation === null) {
        rotation = (Math.random() - 0.5) * 10; // ‡∏™‡∏∏‡πà‡∏° -5 ‡∏ñ‡∏∂‡∏á +5 ‡∏≠‡∏á‡∏®‡∏≤
        propertiesToUpdate.rotation = rotation;
        needsUpdate = true;
    }

    let scale = c.scale || 1.0; // scale ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ default ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏∏‡πà‡∏°

    let top = c.top;
    if (top === undefined || top === null) {
        top = Math.random() * (boardRect.height - 250); // ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Top
        propertiesToUpdate.top = top;
        needsUpdate = true;
    }

    let left = c.left;
    if (left === undefined || left === null) {
        left = Math.random() * (boardRect.width - 180); // ‡∏™‡∏∏‡πà‡∏°‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á Left
        propertiesToUpdate.left = left;
        needsUpdate = true;
    }

    // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏∏‡πà‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà -> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á localStorage ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
    if (needsUpdate) {
        updateStorage(originalIndex, propertiesToUpdate);
    }

    // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏Å‡∏Ç‡∏≠‡∏ö (‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏°‡∏≤ ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡πà‡∏≤‡∏™‡∏∏‡πà‡∏°)
    // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ scale
    const currentHeight = (180 / 0.837) * scale; // ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô width/height ‡∏Ç‡∏≠‡∏á polaroid
    const currentWidth = 180 * scale;
    top = Math.max(0, Math.min(top, boardRect.height - currentHeight - 10)); // ‡πÄ‡∏ú‡∏∑‡πà‡∏≠ padding
    left = Math.max(0, Math.min(left, boardRect.width - currentWidth - 10)); // ‡πÄ‡∏ú‡∏∑‡πà‡∏≠ padding

    // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ transform scale
    // const initialWidth = 180 * scale;
    // card.style.width = `${initialWidth}px`;
    card.style.transform = `rotate(${rotation}deg) scale(${scale})`;
    card.style.width = `180px`; // ‡πÉ‡∏ä‡πâ width ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà
    card.style.top = `${top}px`;
    card.style.left = `${left}px`;


    // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‡∏•‡∏ö .resize-handle ‡∏≠‡∏≠‡∏Å
    card.innerHTML = `
      <button class="delete-btn" title="‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ">√ó</button>
      <img src="${c.img}">
      <div class="caption">${c.text ? c.text : ''}</div>
    `;

    // ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
    card.querySelector(".delete-btn").onclick = (e) => {
      e.stopPropagation();
      if (confirm("‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏ô‡∏∞‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ?")) {
        const originalData = JSON.parse(localStorage.getItem("polaroids") || "[]");
        originalData.splice(originalIndex, 1); // ‡πÉ‡∏ä‡πâ originalIndex
        localStorage.setItem("polaroids", JSON.stringify(originalData));
        loadBoard(); // ‡πÇ‡∏´‡∏•‡∏î‡πÉ‡∏´‡∏°‡πà
      }
    };

    // ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡πå‡∏î = ‡πÄ‡∏õ‡∏¥‡∏î popup
    card.onclick = () => {
      // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‡∏•‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ .wasResizing
      if (card.dataset.wasDragging === 'true') {
        card.dataset.wasDragging = 'false';
        return;
      }
      document.getElementById("previewImg").src = c.img;
      document.getElementById("previewCaption").textContent = c.text || "(‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÅ‡∏Ñ‡∏õ‡∏ä‡∏±‡∏ô)";
      document.getElementById("previewFortune").textContent = c.fortune || "‚ú® ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢‡πÅ‡∏ô‡∏ö‡∏°‡∏≤‡∏Å‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ ‚ú®";
      popup.style.display = "flex";
    };

    board.appendChild(card);

    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏≤‡∏Å/‡∏¢‡πà‡∏≠‡∏Ç‡∏¢‡∏≤‡∏¢
    makeInteractable(card, originalIndex);
  });
}

// ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï localStorage
function updateStorage(index, properties) {
    const data = JSON.parse(localStorage.getItem("polaroids") || "[]");
    if (data[index]) {
        // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï properties
        Object.assign(data[index], properties);
        localStorage.setItem("polaroids", JSON.stringify(data));
    }
}

// ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ä‡πâ Wheel Event
function makeInteractable(card, index) {
    // --- ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏Å‡∏≤‡∏£‡∏•‡∏≤‡∏Å (Drag) ---
    card.addEventListener("mousedown", (e) => {
        // ‡πÑ‡∏°‡πà‡∏•‡∏≤‡∏Å ‡∏ñ‡πâ‡∏≤‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö
        if (e.target.classList.contains("delete-btn")) {
          return;
        }

        card.dataset.wasDragging = 'false';
        // card.dataset.wasResizing = 'false'; // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡πâ‡∏ß
        card.classList.add("dragging");

        const offsetX = e.clientX - card.getBoundingClientRect().left;
        const offsetY = e.clientY - card.getBoundingClientRect().top;

        function onMouseMove(e) {
            if (!card.classList.contains("dragging")) return;
            e.preventDefault();

            card.dataset.wasDragging = 'true';

            let newLeft = e.clientX - board.getBoundingClientRect().left - offsetX;
            let newTop = e.clientY - board.getBoundingClientRect().top - offsetY;

            // ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ scale ‡∏à‡∏≤‡∏Å transform
            let currentScale = 1.0;
            const transform = card.style.transform || "";
            const scaleMatch = transform.match(/scale\(([^)]+)\)/);
            if (scaleMatch && scaleMatch[1]) {
                currentScale = parseFloat(scaleMatch[1]);
            }
            const currentHeight = (180 / 0.837) * currentScale;
            const currentWidth = 180 * currentScale;

            newLeft = Math.max(0, Math.min(newLeft, board.clientWidth - currentWidth));
            newTop = Math.max(0, Math.min(newTop, board.clientHeight - currentHeight));


            card.style.left = `${newLeft}px`;
            card.style.top = `${newTop}px`;
        }

        function onMouseUp() {
            card.classList.remove("dragging");
            document.removeEventListener("mousemove", onMouseMove);
            document.removeEventListener("mouseup", onMouseUp);

            if (card.dataset.wasDragging === 'true') {
              updateStorage(index, {
                  top: parseFloat(card.style.top),
                  left: parseFloat(card.style.left)
              });
            }
        }

        document.addEventListener("mousemove", onMouseMove);
        document.addEventListener("mouseup", onMouseUp);
    });

    // --- ‚≠êÔ∏è [‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç] ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏Ç‡∏¢‡∏≤‡∏¢ (Scale/Resize) ‡∏î‡πâ‡∏ß‡∏¢‡∏•‡πâ‡∏≠‡πÄ‡∏°‡∏≤‡∏™‡πå ---
    card.addEventListener("wheel", (e) => {
        e.preventDefault(); // ‡∏´‡∏¢‡∏∏‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö scroll

        // ‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤ scale ‡πÅ‡∏•‡∏∞ rotation ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        const transform = card.style.transform || "";
        let scale = 1.0;
        let rotation = 0;

        const scaleMatch = transform.match(/scale\(([^)]+)\)/);
        if (scaleMatch && scaleMatch[1]) {
            scale = parseFloat(scaleMatch[1]);
        }
        const rotationMatch = transform.match(/rotate\(([^)]+)deg\)/);
        if (rotationMatch && rotationMatch[1]) {
            rotation = parseFloat(rotationMatch[1]);
        }

        // ‡∏õ‡∏£‡∏±‡∏ö scale
        const scaleAmount = 0.05;
        if (e.deltaY < 0) {
            // ‡∏´‡∏°‡∏∏‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô = ‡∏Ç‡∏¢‡∏≤‡∏¢
            scale += scaleAmount;
        } else {
            // ‡∏´‡∏°‡∏∏‡∏ô‡∏•‡∏á = ‡∏¢‡πà‡∏≠
            scale -= scaleAmount;
        }

        // ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏Ç‡∏ô‡∏≤‡∏î
        scale = Math.max(0.5, Math.min(scale, 2.5)); // ‡∏¢‡πà‡∏≠‡∏™‡∏∏‡∏î 50%, ‡∏Ç‡∏¢‡∏≤‡∏¢‡∏™‡∏∏‡∏î 250%

        card.style.transform = `rotate(${rotation}deg) scale(${scale})`;

        // [‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç] ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡∏ô‡∏≤‡∏î‡∏•‡∏á Storage ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        updateStorage(index, { scale: scale });
    });
}
// ‚≠êÔ∏è [‡∏à‡∏ö‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç]

// ‡∏õ‡∏¥‡∏î popup
closePopupBtn.onclick = () => {
  popup.style.display = "none";
};

// ‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏ï‡∏≠‡∏ô‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤
loadBoard();

// ‡∏ü‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÉ‡∏ô localStorage ‡∏à‡∏≤‡∏Å‡πÅ‡∏ó‡πá‡∏ö‡∏≠‡∏∑‡πà‡∏ô
window.addEventListener('storage', (event) => {
  // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ key ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏∑‡∏≠ 'polaroids' ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!)
  if (event.key === 'polaroids') {
    console.log('localStorage "polaroids" changed! Reloading board...');
    loadBoard(); // ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πà -> ‡πÇ‡∏´‡∏•‡∏î‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
  }
});

// ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ setInterval ‡πÅ‡∏•‡πâ‡∏ß
</script>



</body>
</html>